<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>HTML + CSS</title>
  </head>

  <body>
    <style>
        @import url("https://fonts.googleapis.com/css?family=Poppins:400,500,700&display=swap");
    
        .comment_wrapper > * {
          margin: 0;
          padding: 0;
          font-family: "Poppins", sans-serif;
          box-sizing: border-box;
        }
    
        button:focus,
        input:focus,
        textarea:focus {
          outline: 0;
        }
    
    
        .comment_wrapper {
          padding: 80px 0;
        }
    
        .container {
          max-width: 550px;
          width: 100%;
          margin: 0 auto;
    
        }
    
        .head_text {
          font-size: 40px;
          font-weight: 700;
          max-width: 550px;
          color: #030303;
          padding-left: 20px;
          margin: 20px auto;
        }
    
        .comment_box {
          display: flex;
          align-items: flex-start;
        }
    
        .comment_box {
          margin-top: 20px;
          background-color: #ebebeb;
          color: #030303;
          border-radius: 10px;
          padding: 15px 10px;
          transition: 300ms ease-in-out;
        }
    
        .custom_flex {
          display: flex;
          align-items: center;
          justify-content: space-between;
        }
        .custom_flex > *{
            margin: 0;
        }
    
        .custom_para {
          font-size: 16px;
          color: #030303;
        }
    
        .custom_para span {
          font-size: 13px;
        }
    
        .reply_text {
          color: #030303;
          text-decoration: none;
          transition: 0.2s;
          cursor: pointer;
        }
        .comment_reply {
          width: 90%;
          margin-left: auto;
          margin-top: 10px;
    
          background-color: #ebebeb;
          color: #030303;
          border-radius: 10px;
          padding: 15px 10px;
          transition: 300ms ease-in-out;
        }
        .media-body{
            width: 100%;
        }
        .blog_details_para {
          font-size: 15px;
          margin-top: 20px;
          color: #030303;
        }
        .commentForm{
            display: flex;
            flex-direction: column;
            max-width: 550px;
            gap: 10px;
            margin: 0 auto;
            height: 100%;
            opacity: 1;
            margin-top: 10px;
        }
    
        .commentForm > *:not(button){
            border-radius: 10px;
            border: none;
            padding: 10px;
            font-size: 1rem;
            background-color: #ebebeb;
        }
        .commentForm button{
            cursor: pointer;
            max-width: 120px;
            padding: 10px 25px;
            background-color:rgb(222, 241, 255) ;
            color: rgb(6, 95, 212);
            margin-left: auto;
            border: none;
            border-radius: 10px;
        }
        .hidden{
            height: 0;
            opacity: 0;
        }
      </style>
    <div class="comment_wrapper">
        <h2 class="head_text">Comentarios</h2>
        <form class="commentForm">
            <input type="text" placeholder="escribe tu usuario">
            <textarea placeholder="escribe tu comentario" name="comments" id="comments" cols="30" rows="3"></textarea>
            <button type="submit">comentar</button>
        </form>

      <!-- <div class="container">
        <div class="comment_box">
          <div class="media-body">
            <div class="custom_flex">
              <h5 class="custom_para">Diego Fou</h5>
              <p class="reply_text" href="#">reply</p>
            </div>
            <p class="blog_details_para">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
              eiusmod tempor incididunt utx gh labore et dolor magna ali Ut enim
              ad minim veniam, quis nostrud exercitation .
            </p>
          </div>
        </div>
        <div class="replies">
          <div class="comment_reply">
            <div class="media-body">
              <div class="custom_flex">
                <h5 class="custom_para">
                  Diego Fou | <span>jan 06 2020</span>
                </h5>
                <p class="reply_text" href="#">reply</p>
              </div>
              <p class="blog_details_para">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                eiusmod tempor incididunt utx gh labore et dolor magna ali Ut
                enim ad minim veniam, quis nostrud exercitation .
              </p>
            </div>
          </div>
        </div>
      </div> -->
    </div>
    <!-- <script>
      document.addEventListener("DOMContentLoaded", function () {
        setTimeout(() => {
          let form = document.querySelector(".content");
          let profileLink = document.querySelector(
            ".thrivecart-courses-header-profile-link"
          );
          if (!profileLink) {
            profileLink = document.querySelector(
              ".thrivecart-courses-header-profile"
            );
          }
          let user = profileLink.innerHTML || "default";
          let formUser = form.querySelector("input[type=text]");
          let formComment = form.querySelector(".comment-compose-body");
          formComment.classList.add("show");
          formUser.setAttribute("value", user);
        }, 4000);
      });
    </script> -->
    <script>
      let commentBox = document.querySelector(".comment_wrapper");
      postId = 0;
      const fetchData = async function () {
        let req = await fetch("./posts.json");
        let res = await req.json();
        data = res.posts[postId].comments;
        console.log(data);
        data.map((e) => {
          let user = e.user,
            comment = e.comment,
            replies = e.replies;

          const newComment = document.createElement("div");
          newComment.classList.add("container");
          newComment.innerHTML = `
          <div class="comment_box">
          <div class="media-body">
            <div class="custom_flex">
              <h5 class="custom_para">${user}</h5>
              <p class="reply_text" href="#">responder</p>
            </div>
            <p class="blog_details_para">
              ${comment}
            </p>
          </div>
        </div>
        <form class="commentForm hidden">
            <input type="text" placeholder="escribe tu usuario">
            <textarea placeholder="escribe tu comentario" name="comments" id="comments" cols="30" rows="3"></textarea>
            <button type="submit">comentar</button>
    </form>
        <div class="replies"></div>
      </div>
    </div>

    </div>
          `;
          let showForm = newComment.querySelector(".reply_text")
          showForm.addEventListener("click", function(){
            newComment.querySelector(".commentForm").classList.toggle("hidden")
            console.log("hi")
          })
          if(replies){
            let responses = newComment.querySelector(".replies")
            replies.map(e => {
                const singleResponse = document.createElement("div")
                singleResponse.classList.add("comment_reply")
                singleResponse.innerHTML = `
            <div class="media-body">
              <div class="custom_flex">
                <h5 class="custom_para">
                  ${e.user}
                </h5>
                
              </div>
              <p class="blog_details_para">
                ${e.comment}
              </p>
              
            </div>
                `;
                responses.appendChild(singleResponse)
            })
          }
          commentBox.appendChild(newComment)
        });
      };
      fetchData();
    </script>
  </body>
</html>
